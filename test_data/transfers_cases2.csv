ID,Escenario,Pre-condiciones,Pasos,Validaciones,Resultado Esperado,Datos Prueba,Tag,ExpectedHTTP,OTP
1,Transferencia exitosa dentro de límites,Cuenta origen activa; saldo 100000; horario operativo; monto < 1000000,"Login -> POST /transfers monto 10000 -> Confirmar","HTTP 200; estado 'completada'; saldo descontado","Transferencia aprobada","origen=111-0001;destino=222-0002;monto=10000",functional,200,
2,Exceder límite diario,Histórico hoy 45000; saldo 200000,"Intentar transferir 10000","HTTP 403; código LIMIT_DAILY_EXCEEDED","Rechazo por límite diario; sin cargo","origen=111-0003;destino=222-0004;monto=10000",functional,403,
3,Exceder límite mensual,Total mes 4900000; saldo 6000000,"Intentar transferir 200000","HTTP 403; código LIMIT_MONTHLY_EXCEEDED","Rechazo por límite mensual; sin cargo","origen=111-0005;destino=222-0006;monto=200000",functional,403,
4,Saldo insuficiente,Saldo origen 5000,"Intentar transferir 6000","HTTP 400/402; código INSUFFICIENT_FUNDS","Rechazo por fondos insuficientes","origen=111-0007;destino=222-0008;monto=6000",functional,400,
5,Token OTP inválido para montos altos,Saldo 2000000; monto>1000000 requiere OTP,"Iniciar transferencia 1500000 -> OTP '000000' (inválido)","HTTP 401; código INVALID_OTP; intento contabilizado","Rechazo por OTP inválido; sin cargo","origen=111-0009;destino=222-0010;monto=1500000",functional,401,000000
6,Transferencia en horario de mantenimiento,Horario mantenimiento 01:00-03:00; timestamp 01:30,"Intentar transferir 500 a las 01:30","HTTP 503; código MAINTENANCE_WINDOW","Rechazo o encolamiento según política","origen=111-0011;destino=222-0012;monto=500;timestamp=01:30",functional,503,
7,Cuenta destino inválida o inexistente,Cuenta destino no existe,"Intentar transferir 1000 a cuenta 999-9999","HTTP 404; código DESTINATION_NOT_FOUND","Rechazo; sin cargo","origen=111-0013;destino=999-9999;monto=1000",functional,404,
8,Edge case: transferencia mínima 0.01,Saldo 10; sistema acepta centavos,"Intentar transferir 0.01","HTTP 200 o 400 AMOUNT_TOO_SMALL según política","Aceptar si permite; o rechazar con AMOUNT_TOO_SMALL","origen=111-0014;destino=222-0015;monto=0.01",functional,200,
9,Edge case: monto negativo,Cuenta activa,"Intentar transferir -100","HTTP 400; código INVALID_AMOUNT","Rechazo por monto inválido","origen=111-0016;destino=222-0017;monto=-100",functional,400,
10,Edge case: decimales excesivos,Cuenta activa; moneda soporta 2 decimales,"Intentar transferir 100.1234","HTTP 400 o truncamiento; código INVALID_DECIMAL_PLACES","Rechazo o normalización documentada","origen=111-0018;destino=222-0019;monto=100.1234",functional,400,
11,Concurrencia: 2 transferencias simultáneas agotando saldo,Saldo 10000; T1=7000; T2=5000,"Enviar T1 y T2 concurrentes","Una exitosa; otra falla por fondos; no saldo negativo","Sólo una transferencia aprobada; consistencia","origen=111-0020;destinos=222-0021,222-0022;montos=7000,5000",concurrency,200/400,
12,Cuenta origen bloqueada,Cuenta en estado blocked,"Intentar transferir 1000","HTTP 403; código ACCOUNT_BLOCKED","Rechazo inmediato; sin cargo","origen=111-0023 (blocked);destino=222-0024;monto=1000",functional,403,
13,Cuentas iguales (origen=destino),Cuenta activa,"Intentar transferir 100 desde 111-0025 a 111-0025","HTTP 400; código SAME_ACCOUNT","Rechazo; sin doble contabilización","origen=111-0025;destino=111-0025;monto=100",functional,400,
14,OTP faltante para monto alto,Saldo 2000000; monto 1200000 requiere OTP,"Iniciar transferencia 1200000 sin OTP","HTTP 401; código OTP_REQUIRED","Rechazo por falta de OTP; sin cargo","origen=111-0026;destino=222-0027;monto=1200000",functional,401,
15,Límites en el borde (exactamente diario/mensual),Caso A: hoy 0 -> transferir 50000; Caso B: mes 4950000 -> transferir 50000,"Enviar transferencias en ambos escenarios","HTTP 200 si límite inclusivo; o 400 si exclusivo","Comportamiento conforme a spec","origen=111-0028;destinos=222-0029,222-0030;montos=50000,50000",functional,200,
16,Performance: carga sostenida 1000 req/min durante 10 min,Sistema en estado operativo,"Ejecutar transferencia pequeña repetida en 10 min","Monitoreo de latencia, errores y throughput","SLA: p95 latency < 500ms; error rate < 1%","origen=111-0100;destino=222-0100;monto=10",performance,NA,
17,Performance: prueba de picos 5000 solicitudes en 1 minuto,Sistema en estado operativo,"Generar spike de requests en 1 minuto","Observar degradación, timeouts, failures","Sistema maneja picos según SLA o degrada graciosamente","origen=111-0101;destino=222-0101;monto=10",performance,NA,
18,Performance: concurrencia alta con transferencias grandes,Varias cuentas con saldo alto,"Enviar 200 transferencias simultáneas de 100k","Consistencia, locks, latencias","No deadlocks; error rate dentro de SLA","varias cuentas origen/destino;monto=100000",performance,NA,
19,Performance: prueba de resistencia (sustained) 24h baja tasa,Servicio estable,"Ejecutar tráfico constante bajo durante 24h","Memory/CPU leaks, degradación","No aumento indefinido de recursos; errores estables","origen=111-0200;destino=222-0200;monto=50",performance,NA,
20,Performance: recuperación tras fallo (chaos),Sistema con réplicas y cola,"Simular caída de servicio y recuperación","Verificar reintentos, idempotencia y compensaciones","Transacciones completadas o compensadas; no pérdida de datos","origen=111-0300;destino=222-0300;monto=100",performance,NA
